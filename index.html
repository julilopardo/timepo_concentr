<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calculadora de Tiempos de Concentración</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: auto;
      padding: 20px;
      background-color: #f8f9fa;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    label {
      display: block;
      margin-top: 15px;
      font-weight: bold;
    }
    input[type="number"] {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 30px;
      background-color: #fff;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      text-align: center;
    }
    th {
      background-color: #f1f1f1;
    }
  </style>
</head>
<body>
  <h1>Calculadora de Tiempos de Concentración</h1>
  <form id="formulario">
    <label for="l">Longitud del cauce (L) [km]:</label>
    <input type="number" id="l" step="0.01" min="0" required>

    <label for="s">Pendiente media del cauce (S) [m/m]:</label>
    <input type="number" id="s" step="0.0001" min="0" required>

    <label for="a">Área de la cuenca (A) [km²]:</label>
    <input type="number" id="a" step="0.01" min="0" required>

    <button type="button" onclick="calcular()">Calcular</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>Método</th>
        <th>Tiempo (min)</th>
      </tr>
    </thead>
    <tbody id="resultados">
      <tr><td>Kirpich</td><td id="kirpich">0</td></tr>
      <tr><td>Giandotti</td><td id="giandotti">0</td></tr>
      <tr><td>Passini</td><td id="passini">0</td></tr>
      <tr><td>T. Promedio sin extremos</td><td id="promedio">0</td></tr>
    </tbody>
  </table>

  <script>
    function calcular() {
      const L = parseFloat(document.getElementById('l').value);
      const S = parseFloat(document.getElementById('s').value);
      const A = parseFloat(document.getElementById('a').value);

      if (isNaN(L) || isNaN(S) || isNaN(A) || S <= 0 || L <= 0 || A <= 0) {
        alert("Por favor, ingrese valores válidos y mayores a cero en todos los campos.");
        return;
      }

      // Métodos de cálculo
      const tKirpich = 0.0195 * Math.pow(L * 1000, 0.77) * Math.pow(S, -0.385) / 60;
      const tGiandotti = (4 * Math.sqrt(A) + 1.5 * L) / (0.8 * Math.sqrt(S)) * 60;
      const tPassini = 1.67 * Math.pow(L, 0.467) / Math.pow(S, 0.235);

      const resultados = [tKirpich, tGiandotti, tPassini];
      const promedio = promedioSinExtremos(resultados);

      document.getElementById("kirpich").innerText = tKirpich.toFixed(2);
      document.getElementById("giandotti").innerText = tGiandotti.toFixed(2);
      document.getElementById("passini").innerText = tPassini.toFixed(2);
      document.getElementById("promedio").innerText = promedio.toFixed(2);
    }

    function promedioSinExtremos(arr) {
      const copia = [...arr].sort((a, b) => a - b);
      if (copia.length > 2) {
        copia.shift(); // eliminar menor
        copia.pop();   // eliminar mayor
      }
      const suma = copia.reduce((a, b) => a + b, 0);
      return suma / copia.length;
    }
  </script>
</body>
</html>
